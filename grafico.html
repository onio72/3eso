<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulación de Variables</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            display: flex;
        }
        .table-container {
            width: 30%;
            padding: 20px;
        }
        .graph-container {
            width: 60%;
            position: relative;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        .highlight-red {
            background-color: red;
            color: white;
        }
        .highlight-blue {
            background-color: blue;
            color: white;
        }
        #graph {
            border: 1px solid black;
            position: relative;
            width: 100%;
            height: 300px;
            margin-top: 20px;
        }
        .draggable {
            cursor: move;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
        }
        #pointA {
            background-color: red;
        }
        #pointB {
            background-color: blue;
        }
        .y-axis-label, .x-axis-label {
            width: 100px;
            height: 30px;
            background-color: lightgray;
            text-align: center;
            padding: 5px;
            cursor: move;
        }
        #checkBtn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
        }
        #message {
            font-weight: bold;
            color: red;
            animation: blink 1s step-start infinite;
        }
        @keyframes blink {
            50% {
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div id="message">Lee los datos de la tabla e indica qué tipo de variable es cada magnitud</div>
    <div class="container">
        <div class="table-container">
            <table id="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Variable Independiente</th>
                        <th>Variable Dependiente</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- La tabla se llenará con datos generados dinámicamente -->
                </tbody>
            </table>
        </div>
        <div class="graph-container">
            <div id="graph"></div>
            <div id="pointA" class="draggable"></div>
            <div id="pointB" class="draggable"></div>
            <div id="x-label" class="x-axis-label draggable">Etiqueta X</div>
            <div id="y-label" class="y-axis-label draggable">Etiqueta Y</div>
        </div>
    </div>
    <button id="checkBtn">Comprobar</button>

    <script>
        // Variables y constantes aleatorias para las ecuaciones
        const formulas = [
            { name: 'posición-tiempo (lineal)', formula: (t, m, n) => m * t + n, indep: 'tiempo', dep: 'posición' },
            { name: 'posición-tiempo (cuadrática)', formula: (t, m, n, o) => m * t * t + n * t + o, indep: 'tiempo', dep: 'posición' },
            { name: 'masa-longitud (lineal)', formula: (m, k, k_prime) => k * m + k_prime, indep: 'masa', dep: 'longitud' },
            { name: 'altura-tiempo (raíz cuadrada)', formula: (t, m) => Math.sqrt(m * t), indep: 'tiempo', dep: 'altura' }
            // Puedes agregar más fórmulas aquí según las especificaciones
        ];

        const formula = formulas[Math.floor(Math.random() * formulas.length)];
        const m = (Math.random() * 5).toFixed(1); // Constante aleatoria m
        const n = (Math.random() * 5).toFixed(1); // Constante aleatoria n (si es necesario)
        const o = (Math.random() * 5).toFixed(1); // Constante aleatoria o (si es necesario)
        
        // Generación de los datos
        const indepValues = [0, 1, 2, 3, 4, 5]; // Valores de la variable independiente
        const depValues = indepValues.map(x => {
            if (formula.name.includes('cuadrática')) {
                return formula.formula(x, parseFloat(m), parseFloat(n), parseFloat(o)).toFixed(1);
            } else if (formula.name.includes('lineal') || formula.name.includes('proporcional')) {
                return formula.formula(x, parseFloat(m), parseFloat(n)).toFixed(1);
            } else {
                return formula.formula(x, parseFloat(m)).toFixed(1);
            }
        });

        // Llenar la tabla con los valores generados
        const tableBody = document.querySelector('#data-table tbody');
        indepValues.forEach((val, index) => {
            const row = document.createElement('tr');
            const labelCell = document.createElement('td');
            const indepCell = document.createElement('td');
            const depCell = document.createElement('td');
            
            labelCell.textContent = String.fromCharCode(65 + index); // Letras A, B, C, etc.
            indepCell.textContent = val;
            depCell.textContent = depValues[index];

            if (index === 0) {
                indepCell.classList.add('highlight-red');
                depCell.classList.add('highlight-red');
            } else if (index === 1) {
                indepCell.classList.add('highlight-blue');
                depCell.classList.add('highlight-blue');
            }

            row.appendChild(labelCell);
            row.appendChild(indepCell);
            row.appendChild(depCell);
            tableBody.appendChild(row);
        });

        // Función para arrastrar puntos y etiquetas
        function makeDraggable(elem) {
            let offsetX, offsetY;
            elem.addEventListener('mousedown', function (e) {
                offsetX = e.clientX - elem.offsetLeft;
                offsetY = e.clientY - elem.offsetTop;

                function onMouseMove(e) {
                    elem.style.left = (e.clientX - offsetX) + 'px';
                    elem.style.top = (e.clientY - offsetY) + 'px';
                }

                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', function () {
                    document.removeEventListener('mousemove', onMouseMove);
                }, { once: true });
            });
        }

        // Aplicar la función draggable a puntos y etiquetas
        makeDraggable(document.getElementById('pointA'));
        makeDraggable(document.getElementById('pointB'));
        makeDraggable(document.getElementById('x-label'));
        makeDraggable(document.getElementById('y-label'));

        // Botón de comprobación
        document.getElementById('checkBtn').addEventListener('click', function () {
            alert('¡Comprobación realizada! Aquí se debería evaluar la colocación de los puntos y etiquetas.');
        });
    </script>
</body>
</html>
