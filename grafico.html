<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Representación Gráfica de Datos</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            display: flex;
            flex-direction: row;
            margin: 0;
            padding: 0;
        }
        #chart-container {
            width: 70%;
            padding: 20px;
        }
        #data-table {
            width: 30%;
            padding: 20px;
            border-left: 2px solid #ccc;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        canvas {
            display: block;
            margin: auto;
            width: 90%; /* Ajusta el tamaño del gráfico */
            height: 500px; /* Aumenta la altura del gráfico */
        }
        #draggable-items {
            margin-top: 20px;
        }
        .draggable {
            display: inline-block;
            padding: 10px;
            border: 1px solid #333;
            margin-right: 10px;
            cursor: move;
        }
        .draggable-point {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: black;
            color: white;
            text-align: center;
            border-radius: 50%;
            margin-right: 10px;
            cursor: move;
        }
        #evaluation {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div id="chart-container">
    <canvas id="myChart"></canvas>
    <div id="draggable-items">
        <div class="draggable" draggable="true" id="label-x">Etiqueta X</div>
        <div class="draggable" draggable="true" id="label-y">Etiqueta Y</div>
        <div class="draggable-point" draggable="true" id="point-1">E</div>
        <div class="draggable-point" draggable="true" id="point-2">F</div>
    </div>
    <div id="evaluation">
        <p>Puntuación: <span id="score">0%</span></p>
    </div>
</div>

<div id="data-table">
    <table>
        <thead>
            <tr>
                <th>Letra</th>
                <th id="col1">X</th>
                <th id="col2">Y</th>
            </tr>
        </thead>
        <tbody id="table-body">
            <!-- Data rows will be inserted here dynamically -->
        </tbody>
    </table>
    <div>
        <p>La <span id="variable1"></span> es la variable 
            <select id="select1">
                <option value="independiente">Independiente</option>
                <option value="dependiente">Dependiente</option>
            </select>
        </p>
        <p>La <span id="variable2"></span> es la variable 
            <select id="select2">
                <option value="independiente">Independiente</option>
                <option value="dependiente">Dependiente</option>
            </select>
        </p>
    </div>
</div>

<script>
    // Posibles parejas de variables con proporcionalidad directa o inversa
    const variablePairs = [
        {x: 'tiempo (s)', y: 'posición (m)', proportionality: 'directa'},
        {x: 'tiempo (s)', y: 'velocidad (m/s)', proportionality: 'directa'},
        {x: 'masa (g)', y: 'longitud (cm)', proportionality: 'inversa'},
        {x: 'altura (m)', y: 'tiempo (s)', proportionality: 'directa'},
        {x: 'aceleración (m/s^2)', y: 'fuerza (N)', proportionality: 'directa'}
    ];

    // Sorteamos una pareja al azar
    const chosenPair = variablePairs[Math.floor(Math.random() * variablePairs.length)];

    document.getElementById('variable1').textContent = chosenPair.x;
    document.getElementById('variable2').textContent = chosenPair.y;

    // Datos simples con relación directa o inversa
    const data = [
        { letter: 'A', x: 1, y: chosenPair.proportionality === 'directa' ? 2 : 10 },
        { letter: 'B', x: 2, y: chosenPair.proportionality === 'directa' ? 4 : 5 },
        { letter: 'C', x: 3, y: chosenPair.proportionality === 'directa' ? 6 : 3.33 },
        { letter: 'D', x: 4, y: chosenPair.proportionality === 'directa' ? 8 : 2.5 },
        { letter: 'E', x: 5, y: chosenPair.proportionality === 'directa' ? 10 : 2 },
        { letter: 'F', x: 6, y: chosenPair.proportionality === 'directa' ? 12 : 1.66 }
    ];

    // Mostrar los datos en la tabla
    const tableBody = document.getElementById('table-body');
    data.forEach(d => {
        const row = document.createElement('tr');
        row.innerHTML = `<td>${d.letter}</td><td>${d.x}</td><td>${d.y.toFixed(2)}</td>`;
        tableBody.appendChild(row);
    });

    // Crear la gráfica
    const ctx = document.getElementById('myChart').getContext('2d');
    const randomPoints = data.sort(() => 0.5 - Math.random()).slice(0, 4);
    const myChart = new Chart(ctx, {
        type: 'scatter',
        data: {
            datasets: [{
                label: `${chosenPair.x} vs ${chosenPair.y}`,
                data: randomPoints.map(d => ({x: d.x, y: d.y})),
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1,
                showLine: true
            }]
        },
        options: {
            scales: {
                x: {
                    type: 'linear',
                    position: 'bottom',
                    title: {
                        display: true,
                        text: chosenPair.x
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: chosenPair.y
                    }
                }
            }
        }
    });

    // Evaluación del estudiante
    let score = 0;
    document.querySelectorAll('.draggable, .draggable-point').forEach(item => {
        item.addEventListener('dragend', () => {
            score += 25;  // Asumimos que cada objeto arrastrado correctamente añade 25%
            document.getElementById('score').textContent = score + '%';
        });
    });

</script>
</body>
</html>


